<!DOCTYPE html>
<html style="height: 100%;overflow: hidden;">

<head>
    <title>页面跳转</title>
    <link rel="stylesheet" href="../static/js/layui/css/layui.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body class="layui-layout-body">
    <div >
        <div class="layui-row" style="padding: 10px;">
            <div class="layui-row layui-col-space30">
                <div class="layui-col-md6">
                    <div class="layui-card">
                        <div class="layui-card-header">综合</div>
                        <div class="layui-card-body">
                            <div id="main" style="height:250px;"></div>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md6">
                    <div class="layui-card">
                        <div class="layui-card-header">限速队列</div>
                        <div class="layui-card-body">
                            <div id="queue_speed_limit" style="height:250px;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layui-row layui-col-space15">
                <div class="layui-col-md4">
                    <div class="layui-card">
                        <div class="layui-card-header">高优先级</div>
                        <div class="layui-card-body">
                            <div id="queue_priority_high" style="height:250px;"></div>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md4">
                    <div class="layui-card">
                        <div class="layui-card-header">中优先级</div>
                        <div class="layui-card-body">
                            <div id="queue_priority_mid" style="height:250px;"></div>
                        </div>
                    </div>
                </div>
                <div class="layui-col-md4">
                    <div class="layui-card">
                        <div class="layui-card-header">低优先级</div>
                        <div class="layui-card-body">
                            <div id="queue_priority_low" style="height:250px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <script src="../static/js/layui/layui.js"></script>
    <script src="https://cdn.bootcss.com/echarts/4.6.0/echarts.min.js"></script>


    <script>
        var app = new Vue({
            el: "#app",
            data: {
                joke: '123'
            },
            methods: {
                get_json: function () {
                    // axios.get("http://127.0.0.1:5000/").then(fun1, fun2);
                    // axios.get("https://autumnfish.cn/api/joke/list?num=1").then(this.fun1, this.fun2);
                    axios.get("http://localhost:5000/login/info").then(this.fun1).catch(this.fun2);
                },
                fun1: function (response) {
                    this.joke = response.data;
                },
                fun2: function (response) {
                    alert('error');
                },
            },
            mounted() {
                this.timer = setInterval(this.get_json, 1000);
            },
            beforeDestroy() {
                clearInterval(this.timer);
            }

        })
        // alert('123')
        // axios.get("http://127.0.0.1:5000/").then(fun1, fun2);

        layui.use('element', function () {
            var element = layui.element;

            //…
        });

    </script>

    <script src="../static/js/login_info.js"></script>
</body>

</html>